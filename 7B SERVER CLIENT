#include <stdio.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>

int main()
{
    // 1️⃣ Create a unique key for shared memory
    key_t key = ftok("shmfile", 65);

    // 2️⃣ Create a shared memory segment of size 1024 bytes
    int shmid = shmget(key, 1024, 0666 | IPC_CREAT);

    // 3️⃣ Attach the shared memory segment to the address space of this process
    char *str = (char*) shmat(shmid, NULL, 0);

    // 4️⃣ Write message into shared memory
    printf("Write Data: ");
    fgets(str, 1024, stdin);

    printf("Data written in memory: %s\n", str);

    // 5️⃣ Detach from the shared memory
    shmdt(str);

    return 0;
}

Save this file as server.c










Save this file as client.c

#include <stdio.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <sys/types.h>
#include <unistd.h>

int main()
{
    // 1️⃣ Use the same key as the server
    key_t key = ftok("shmfile", 65);

    // 2️⃣ Get the shared memory segment created by server
    int shmid = shmget(key, 1024, 0666);

    // 3️⃣ Attach the segment to this process’s address space
    char *str = (char*) shmat(shmid, NULL, 0);

    // 4️⃣ Read the message
    printf("Data read from memory: %s\n", str);

    // 5️⃣ Detach from shared memory
    shmdt(str);

    // 6️⃣ Destroy the shared memory segment (optional, usually done by server)
    shmctl(shmid, IPC_RMID, NULL);

    return 0;
}

gcc server.c -o server
gcc client.c -o client
./server

server 
Write Data: Hello from shared memory!
Data written in memory: Hello from shared memory!

client 
Data read from memory: Hello from shared memory!





